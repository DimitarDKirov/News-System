extends ../_layout

block app-title
    | #{result.title} Details

block content
    div.col-lg-8
        h1 #{result.title}

        h2 
            | by #{result.author}
            | on 
            = new Date(result.publishedAt).toLocaleString()
    
        div.panel.panel-default.col-lg-12.content
            div.col-lg-6
                img.img-responsive(src= result.imageUrl, alt="article-image" width="400px")
            div.panel.panel-default.col-lg-6
                p 
                    | #{result.description}
                    br
                    a.see-more(href=result.url)
                        | See more
        
        if user
            form(method="POST" action="/article-details/"+result._id)
                button.btn.btn-success
                    | Add to Favourite Articles
        
            div.panel.panel-default
                div.panel-heading
                    div.panel-title
                    | Comments
                div.panel-body
                    form(method="POST" action="/comment?articleId="+result._id)
                        div.form-group
                            textarea.form-control(rows="3" name="commentContent")
                        button.btn.btn-default(type="submit")
                            | Submit

                    each comment in result.comments
                        hr
                        div= comment.content
                        p
                        | by 
                        a(href="/#")= comment.author?comment.author:'Anonymous'
                        |  on  
                        = new Date(comment.date).toLocaleString()